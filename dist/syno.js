(function(){function setter(){throw new Error("Cannot manually set module property")}function setModule(a,b){if(modules.hasOwnProperty(a))throw new Error("Module "+a+" already exists.");var c;Object.defineProperty(modules,a,{get:function(){if(c)return c;if(b.busy)throw new Error("Cyclic dependency detected on module "+a);return b.busy=!0,c=b(),b.busy=!1,c},set:setter})}var modules={};with(modules)(function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;setModule("API",function(){var a,b;return b={},a=b.exports={},function(a,b){var c,d,e,f;return f=require("lodash"),e=f.extend,d=f.defaults,c=function(){function a(a){this.syno=a}var b;return b=function(){},a.prototype.request=function(a,c){var e,f,g,h,i,j,k,l,m,n,o;return null==a&&(a={}),null==c&&(c=b),o=this.syno,k=o.protocol,f=o.host,j=o.port,e=a.api,n=a.version,i=a.path,g=a.method,h=a.params,m=k+"://"+f+":"+j+"/webapi/"+i,l=d({api:e,version:n,method:g},h),this.syno.request({url:m,qs:l},function(a,b,d){return a?c(a):200!==b.statusCode?c(b.statusCode):d.success?c(null,d.data):c(JSON.stringify(d.error,null,4))})},a.prototype.requestAPI=function(a){var b,c,d,f,g,h;return b=a.apiInfos,g=a.requiredParams,f=a.params,c=a.done,h=Utils.optionalParamsAndDone({params:f,done:c}),f=h.params,c=h.done,Utils.checkRequiredParams(f,g),d=e({},b,{params:f}),this.request(d,c)},a}(),b.exports=c}(modules,b,a,void 0,void 0),b.exports}),setModule("Auth",function(){var b,c;return c={},b=c.exports={},function(b,c){var d;return d=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}var d,e,f;return a(c,b),d="SYNO.API.Auth",f=3,e="auth.cgi",c.prototype.login=function(a){var b,c,g;return b="login",g="SYNO_SESSION_"+Date.now(),c={account:this.syno.account,passwd:this.syno.passwd,session:g},this.syno.session=g,this.request({api:d,version:f,path:e,method:b,params:c},a)},c.prototype.logout=function(a){var b,c;return this.syno.session?(b="logout",c={session:this.syno.session},this.syno.session=null,this.request({api:d,version:f,path:e,method:b,params:c},a)):null},c}(API),c.exports=d}(modules,c,b,void 0,void 0),c.exports}),setModule("AuthenticatedAPI",function(){var b,c;return c={},b=c.exports={},function(b,c){var d;return d=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}var d;return a(c,b),d=function(){},c.prototype.request=function(a,b){return null==b&&(b=d),this.syno.session?c.__super__.request.call(this,a,b):this.syno.auth.login(function(d){return function(e){return e?b(e):c.__super__.request.call(d,a,b)}}(this))},c}(API),c.exports=d}(modules,c,b,void 0,void 0),c.exports}),setModule("DownloadStation",function(){var b,c;return c={},b=c.exports={},function(b,c){var d;return d=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.getDownloadStationInfo=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Info",version:1,path:"DownloadStation/info.cgi",method:"getinfo"}})},c.prototype.getDownloadStationConfig=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Info",version:1,path:"DownloadStation/info.cgi",method:"getconfig"}})},c.prototype.setDownloadStationConfig=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Info",version:1,path:"DownloadStation/info.cgi",method:"setserverconfig"}})},c.prototype.getScheduleConfig=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Schedule",version:1,path:"DownloadStation/schedule.cgi",method:"getconfig"}})},c.prototype.setScheduleConfig=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Schedule",version:1,path:"DownloadStation/schedule.cgi",method:"setconfig"}})},c.prototype.listTasks=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Task",version:1,path:"DownloadStation/task.cgi",method:"list"}})},c.prototype.getTasksInfo=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.DownloadStation.Task",version:1,path:"DownloadStation/task.cgi",method:"getinfo"}})},c.prototype.createTask=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Task",version:3,path:"DownloadStation/task.cgi",method:"create"}})},c.prototype.deleteTasks=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.DownloadStation.Task",version:1,path:"DownloadStation/task.cgi",method:"delete"}})},c.prototype.pauseTasks=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.DownloadStation.Task",version:1,path:"DownloadStation/task.cgi",method:"pause"}})},c.prototype.resumeTasks=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.DownloadStation.Task",version:1,path:"DownloadStation/task.cgi",method:"resume"}})},c.prototype.editTasks=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.DownloadStation.Task",version:2,path:"DownloadStation/task.cgi",method:"edit"}})},c.prototype.getStats=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.Statistic",version:1,path:"DownloadStation/statistic.cgi",method:"getinfo"}})},c.prototype.listRSSSites=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.RSS.Site",version:1,path:"DownloadStation/RSSsite.cgi",method:"list"}})},c.prototype.refreshRSSSites=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.DownloadStation.RSS.Site",version:1,path:"DownloadStation/RSSsite.cgi",method:"refresh"}})},c.prototype.listRSSFeeds=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.RSS.Feed",version:1,path:"DownloadStation/RSSfeed.cgi",method:"list"}})},c.prototype.startBTSearch=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["keyword","module"],apiInfos:{api:"SYNO.DownloadStation.BTSearch",version:1,path:"DownloadStation/btsearch.cgi",method:"start"}})},c.prototype.listBTSearch=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.DownloadStation.BTSearch",version:1,path:"DownloadStation/btsearch.cgi",method:"start"}})},c.prototype.getBTSearchCategories=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.BTSearch",version:1,path:"DownloadStation/btsearch.cgi",method:"getCategory"}})},c.prototype.cleanBTSearch=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.DownloadStation.BTSearch",version:1,path:"DownloadStation/btsearch.cgi",method:"clean"}})},c.prototype.getBTSearchModules=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.DownloadStation.BTSearch",version:1,path:"DownloadStation/btsearch.cgi",method:"getModule"}})},c}(AuthenticatedAPI),c.exports=d}(modules,c,b,void 0,void 0),c.exports}),setModule("FileStation",function(){var b,c;return c={},b=c.exports={},function(b,c){var d,e;return e=require("lodash").defaults,d=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}var d,f;return a(c,b),c.prototype.getFileStationInfo=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.Info",version:1,path:"FileStation/info.cgi",method:"getinfo"}})},c.prototype.listSharedFolders=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.List",version:1,path:"FileStation/file_share.cgi",method:"list_share"}})},c.prototype.listFiles=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["folder_path"],apiInfos:{api:"SYNO.FileStation.List",version:1,path:"FileStation/file_share.cgi",method:"list"}})},c.prototype.getFilesInfo=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.List",version:1,path:"FileStation/file_share.cgi",method:"getinfo"}})},c.prototype.startSearch=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["folder_path"],apiInfos:{api:"SYNO.FileStation.Search",version:1,path:"FileStation/file_find.cgi",method:"start"}})},c.prototype.stopSearch=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Search",version:1,path:"FileStation/file_find.cgi",method:"stop"}})},c.prototype.listSearch=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Search",version:1,path:"FileStation/file_find.cgi",method:"list"}})},c.prototype.cleanSearches=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Search",version:1,path:"FileStation/file_find.cgi",method:"clean"}})},c.prototype.listVirtualFolders=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["type"],apiInfos:{api:"SYNO.FileStation.VirtualFolder",version:1,path:"FileStation/file_virtual.cgi",method:"list"}})},c.prototype.listFavorites=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.Favorite",version:1,path:"FileStation/file_favorite.cgi",method:"list"}})},c.prototype.addFavorite=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path","name"],apiInfos:{api:"SYNO.FileStation.Favorite",version:1,path:"FileStation/file_favorite.cgi",method:"list"}})},c.prototype.deleteFavorite=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.Favorite",version:1,path:"FileStation/file_favorite.cgi",method:"delete"}})},c.prototype.cleanBrokenFavorites=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.Favorite",version:1,path:"FileStation/file_favorite.cgi",method:"delete"}})},c.prototype.editFavorite=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path","name"],apiInfos:{api:"SYNO.FileStation.Favorite",version:1,path:"FileStation/file_favorite.cgi",method:"edit"}})},c.prototype.replaceAllFavorites=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path","name"],apiInfos:{api:"SYNO.FileStation.Favorite",version:1,path:"FileStation/file_favorite.cgi",method:"replace_all"}})},c.prototype.getThumbnail=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.Thumb",version:1,path:"FileStation/file_thumb.cgi",method:"get"}})},c.prototype.startDirSize=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.DirSize",version:1,path:"FileStation/file_dirSize.cgi",method:"start"}})},c.prototype.statusDirSize=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.DirSize",version:1,path:"FileStation/file_dirSize.cgi",method:"status"}})},c.prototype.stopDirSize=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.DirSize",version:1,path:"FileStation/file_dirSize.cgi",method:"stop"}})},c.prototype.startMD5=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["file_path"],apiInfos:{api:"SYNO.FileStation.MD5",version:1,path:"FileStation/file_md5.cgi",method:"start"}})},c.prototype.statusMD5=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.MD5",version:1,path:"FileStation/file_md5.cgi",method:"status"}})},c.prototype.stopMD5=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.MD5",version:1,path:"FileStation/file_md5.cgi",method:"stop"}})},c.prototype.checkWritePermission=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.MD5",version:1,path:"FileStation/file_md5.cgi",method:"status"}})},c.prototype.getSharingLinkInfo=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.FileStation.Sharing",version:1,path:"FileStation/file_sharing.cgi",method:"getinfo"}})},c.prototype.listSharingLinks=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.Sharing",version:1,path:"FileStation/file_sharing.cgi",method:"list"}})},c.prototype.createSharingLinks=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.Sharing",version:1,path:"FileStation/file_sharing.cgi",method:"create"}})},c.prototype.deleteSharingLinks=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.FileStation.Sharing",version:1,path:"FileStation/file_sharing.cgi",method:"delete"}})},c.prototype.clearInvalidSharingLinks=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.Sharing",version:1,path:"FileStation/file_sharing.cgi",method:"clear_invalid"}})},c.prototype.editSharingLinks=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["id"],apiInfos:{api:"SYNO.FileStation.Sharing",version:1,path:"FileStation/file_sharing.cgi",method:"edit"}})},c.prototype.createFolder=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path","name"],apiInfos:{api:"SYNO.FileStation.CreateFolder",version:1,path:"FileStation/file_crtfdr.cgi",method:"create"}})},c.prototype.rename=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path","name"],apiInfos:{api:"SYNO.FileStation.Rename",version:1,path:"FileStation/file_rename.cgi",method:"rename"}})},c.prototype.startCopyMove=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path","dest_folder_path"],apiInfos:{api:"SYNO.FileStation.CopyMove",version:1,path:"FileStation/file_MVCP.cgi",method:"start"}})},c.prototype.statusCopyMove=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.CopyMove",version:1,path:"FileStation/file_MVCP.cgi",method:"status"}})},c.prototype.stopCopyMove=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.CopyMove",version:1,path:"FileStation/file_MVCP.cgi",method:"stop"}})},c.prototype.startDelete=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.Delete",version:1,path:"FileStation/file_delete.cgi",method:"start"}})},c.prototype.statusDelete=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Delete",version:1,path:"FileStation/file_delete.cgi",method:"status"}})},c.prototype.stopDelete=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Delete",version:1,path:"FileStation/file_delete.cgi",method:"stop"}})},c.prototype["delete"]=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path"],apiInfos:{api:"SYNO.FileStation.Delete",version:1,path:"FileStation/file_delete.cgi",method:"delete"}})},c.prototype.startExtract=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["file_path","dest_folder_path"],apiInfos:{api:"SYNO.FileStation.Extract",version:1,path:"FileStation/file_extract.cgi",method:"start"}})},c.prototype.statusExtract=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Extract",version:1,path:"FileStation/file_extract.cgi",method:"status"}})},c.prototype.stopExtract=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Extract",version:1,path:"FileStation/file_extract.cgi",method:"stop"}})},c.prototype.listArchiveFiles=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["file_path"],apiInfos:{api:"SYNO.FileStation.Extract",version:1,path:"FileStation/file_extract.cgi",method:"list"}})},c.prototype.startCompress=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["path","dest_file_path"],apiInfos:{api:"SYNO.FileStation.Compress",version:1,path:"FileStation/file_compress.cgi",method:"start"}})},c.prototype.statusCompress=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Compress",version:1,path:"FileStation/file_compress.cgi",method:"status"}})},c.prototype.stopCompress=function(a,b){return this.requestAPI({params:a,done:b,requiredParams:["taskid"],apiInfos:{api:"SYNO.FileStation.Compress",version:1,path:"FileStation/file_compress.cgi",method:"stop"}})},c.prototype.listBackgroundTasks=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.BackgroundTask",version:1,path:"FileStation/background_task.cgi",method:"list"}})},c.prototype.clearFinishedBackgroundTasks=function(a,b){return this.requestAPI({params:a,done:b,apiInfos:{api:"SYNO.FileStation.BackgroundTask",version:1,path:"FileStation/background_task.cgi",method:"clear_finished"}})},f=function(a,b,c){var d,f,g,h,i,j,k,l,m,n;return n=Utils.optionalParamsAndDone({params:b,done:c}),b=n.params,c=n.done,Utils.checkRequiredParams(b,["dest_folder_path","filename"]),k=a.protocol,g=a.host,j=a.port,d="SYNO.FileStation.Upload",m="1",i="FileStation/api_upload.cgi",h="upload",l=k+"://"+g+":"+j+"/webapi/"+i,f=e({api:d,version:m,method:h},b),a.request.post({url:l,formData:f},function(a,b,d){return c(a?a:200!==b.statusCode?b.statusCode:d.success?null:d.error)})},c.prototype.upload=function(a,b){var c;return c=this.syno,c.session?f(c,a,b):c.auth.login(function(d){return d?b(d):f(c,a,b)})},d=function(a,b,c){var d,f,g,h,i,j,k,l,m,n,o;return o=Utils.optionalParamsAndDone({params:b,done:c}),b=o.params,c=o.done,Utils.checkRequiredParams(b,["path","stream"]),l=b.stream,delete b.stream,j=a.protocol,f=a.host,i=a.port,d="SYNO.FileStation.Download",n=1,h="FileStation/file_download.cgi",g="download",m=j+"://"+f+":"+i+"/webapi/"+h,k=e({api:d,version:n,method:g},b),a.request({url:m,qs:k,json:!1}).on("error",function(a){return c(a)}).on("end",function(){return c(null)}).pipe(l)},c.prototype.download=function(a,b){var c;return c=this.syno,c.session?d(c,a,b):c.auth.login(function(e){return e?b(e):d(c,a,b)})},c}(AuthenticatedAPI),c.exports=d}(modules,c,b,void 0,void 0),c.exports}),setModule("Syno",function(){var a,b;return b={},a=b.exports={},function(a,b){var c,d,e;return e=require("request"),d=require("lodash").defaults,c=function(){function a(a){if(d(this,a,b),!this.account)throw new Error("Did not specified `account` for syno");if(!this.passwd)throw new Error("Did not specified `passwd` for syno");this.request=e.defaults({jar:!0,json:!0}),this.session=null,this.auth=new Auth(this),this.fs=this.fileStation=new FileStation(this),this.dl=this.downloadStation=new DownloadStation(this)}var b;return b={protocol:"http",host:"localhost",port:5e3},a}(),b.exports=c}(modules,b,a,void 0,void 0),b.exports}),setModule("Utils",function(){var a,b;return b={},a=b.exports={},function(a,b){var c,d,e,f,g;return g=require("lodash"),e=g.isFunction,f=g.isPlainObject,d=g.each,c=function(){function a(){}return a.optionalParamsAndDone=function(a){var b,c;return null==a&&(a={}),c=a.params,b=a.done,b||(a.done=e(c)?c:function(){}),f(c)||(a.params={}),a},a.checkRequiredParams=function(a,b){return null==b&&(b=[]),d(b,function(b){if(!a[b])throw new Error(b+" param is required")})},a}(),b.exports=c}(modules,b,a,void 0,void 0),b.exports})}).call(this);"undefined"!=typeof module&&module.exports?module.exports=modules.Syno:this.Syno=modules.Syno}).call(this);